# 3CX n8n Integration - Environment Configuration
# Copy this file to .env and update with your values

# =============================================================================
# n8n Basic Configuration
# =============================================================================

# Basic Authentication
N8N_USER=admin
N8N_PASSWORD=change-this-secure-password

# Server Configuration
N8N_HOST=localhost
N8N_PORT=5678
N8N_PROTOCOL=http

# Webhook Configuration
WEBHOOK_URL=http://localhost:5678

# Security Keys (IMPORTANT: Change these in production!)
N8N_ENCRYPTION_KEY=your-32-character-encryption-key-here
JWT_SECRET=your-jwt-secret-key-here

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================

POSTGRES_DB=n8n
POSTGRES_USER=n8n
POSTGRES_PASSWORD=secure-database-password

# =============================================================================
# Redis Configuration (Queue Management)
# =============================================================================

REDIS_PASSWORD=secure-redis-password

# =============================================================================
# 3CX Integration Configuration
# =============================================================================

# 3CX Server Details
N8N_3CX_DEFAULT_SERVER=https://your-3cx-server.com:5001
N8N_3CX_DEFAULT_EXTENSION=999

# API Configuration
N8N_3CX_TIMEOUT=30000
N8N_3CX_RETRY_ATTEMPTS=3
N8N_3CX_MAX_CONCURRENT_CALLS=10
N8N_3CX_CONNECTION_POOL_SIZE=5

# Logging Configuration
N8N_3CX_LOG_LEVEL=info

# Webhook Security
N8N_3CX_WEBHOOK_SECRET=your-webhook-secret-key

# =============================================================================
# Monitoring Configuration (Optional)
# =============================================================================

# Grafana
GRAFANA_PASSWORD=secure-grafana-password

# =============================================================================
# Production Configuration
# =============================================================================

# SSL/TLS Configuration (for production)
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem

# Domain Configuration
DOMAIN_NAME=your-domain.com

# Email Configuration (for notifications)
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_USER=notifications@your-domain.com
SMTP_PASSWORD=your-email-password
SMTP_FROM=n8n-3cx@your-domain.com

# =============================================================================
# Development Configuration
# =============================================================================

# Development Mode
NODE_ENV=production

# Debug Configuration
DEBUG_MODE=false
VERBOSE_LOGGING=false

# Test Configuration
TEST_3CX_URL=https://test-3cx-server.com:5001
TEST_3CX_CLIENT_ID=test-client-id
TEST_3CX_CLIENT_SECRET=test-client-secret
TEST_3CX_EXTENSION=999

# =============================================================================
# Backup Configuration
# =============================================================================

# Backup Retention
BACKUP_RETENTION_DAYS=30

# S3 Backup Configuration (Optional)
AWS_ACCESS_KEY_ID=your-aws-access-key
AWS_SECRET_ACCESS_KEY=your-aws-secret-key
S3_BACKUP_BUCKET=your-backup-bucket
S3_BACKUP_REGION=us-east-1

# =============================================================================
# Performance Tuning
# =============================================================================

# Worker Configuration
N8N_WORKERS=2
N8N_MEMORY_LIMIT=2048

# Database Connection Pool
DB_POOL_SIZE=10
DB_POOL_TIMEOUT=30000

# Redis Configuration
REDIS_MAX_MEMORY=256mb
REDIS_MAX_MEMORY_POLICY=allkeys-lru

# =============================================================================
# Security Configuration
# =============================================================================

# Rate Limiting
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_BURST=50

# CORS Configuration
CORS_ALLOWED_ORIGINS=http://localhost:3000,https://your-domain.com

# API Security
API_RATE_LIMIT=100
API_BURST_LIMIT=20

# =============================================================================
# Notification Configuration
# =============================================================================

# Slack Integration
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Discord Integration
DISCORD_WEBHOOK=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK

# PagerDuty Integration
PAGERDUTY_INTEGRATION_KEY=your-pagerduty-integration-key

# =============================================================================
# Feature Flags
# =============================================================================

# Enable/Disable Features
ENABLE_METRICS=true
ENABLE_TELEMETRY=false
ENABLE_USER_MANAGEMENT=true
ENABLE_COMMUNITY_PACKAGES=true
ENABLE_TEMPLATES=true

# 3CX Specific Features
ENABLE_3CX_WEBHOOKS=true
ENABLE_3CX_MONITORING=true
ENABLE_3CX_ANALYTICS=true
ENABLE_3CX_QUEUE_MANAGEMENT=true

# =============================================================================
# Logging Configuration
# =============================================================================

# General Logging
LOG_LEVEL=info
LOG_OUTPUT=console,file
LOG_FILE_MAX_SIZE=10MB
LOG_FILE_MAX_COUNT=5

# Component-Specific Logging
AUTH_LOG_LEVEL=info
API_LOG_LEVEL=info
WEBHOOK_LOG_LEVEL=info
CALL_CONTROL_LOG_LEVEL=info

# =============================================================================
# Advanced Configuration
# =============================================================================

# Timezone
TZ=UTC

# Locale
N8N_DEFAULT_LOCALE=en

# Custom Node Path
N8N_CUSTOM_EXTENSIONS=/home/node/.n8n/nodes

# Execution Timeout
N8N_WORKFLOW_TIMEOUT=3600

# Queue Configuration
QUEUE_BULL_REDIS_DB=0
QUEUE_BULL_REDIS_TIMEOUT=30000

# =============================================================================
# Docker Specific Configuration
# =============================================================================

# Container Names
CONTAINER_PREFIX=n8n-3cx

# Network Configuration
DOCKER_NETWORK=n8n-network
DOCKER_SUBNET=172.20.0.0/16

# Volume Configuration
DATA_VOLUME=n8n_data
LOGS_VOLUME=n8n_logs
DB_VOLUME=postgres_data

# =============================================================================
# Kubernetes Configuration (if using K8s)
# =============================================================================

# Namespace
K8S_NAMESPACE=n8n-3cx

# Resource Limits
K8S_CPU_REQUEST=100m
K8S_CPU_LIMIT=1000m
K8S_MEMORY_REQUEST=256Mi
K8S_MEMORY_LIMIT=2Gi

# Storage Class
K8S_STORAGE_CLASS=standard
K8S_STORAGE_SIZE=10Gi